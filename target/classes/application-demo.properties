# Run WITHOUT MySQL - uses embedded H2 database (good for demo/showcase)
# Run with: .\run.ps1  (script uses demo profile by default)

spring.datasource.url=jdbc:h2:file:./data/cropdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# CRITICAL: Override the MySQL dialect inherited from application.properties
# Without this, Hibernate tries to generate MySQL DDL against H2, silently failing
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# Ensure Hibernate DDL runs before any SQL data initialization
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always

# H2 console (browse http://localhost:8080/h2-console when enabled)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
